@startuml
actor Client
participant "quotes.views.create_quote_form_details" as API
participant "quotes.views.ins_forms_master" as ins_forms_master
participant "quotes.views.add_forms_details_db" as add_forms_details_db

Client -> API: POST /create_quote_form_details (quotes_forms, fileData)
API -> API: json.loads(request.body)
API -> API: Extract form_data, filesData
alt filesData is not empty
    API -> API: Generate file_id (uuid)
    API -> API: Build file_location
    API -> API: base64.decodebytes(filesData[0]['filecontent'])
    API -> API: Write decoded file to file_location
end
API -> ins_forms_master: ins_forms_master(0, form_name, ..., file_location, company_id, lob_id)
ins_forms_master --> API: form_data
API -> add_forms_details_db: add_forms_details_db(form_data)
add_forms_details_db --> API: status
alt status != "FAIL"
    API -> API: Build success response
else
    API -> API: Build failure response
end
API -> Client: Response(data, HTTP 200)
API -> Client: (on error) Response(data, HTTP 500)
@enduml